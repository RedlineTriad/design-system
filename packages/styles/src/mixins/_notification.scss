@use 'sass:map';

@use './color' as color-mx;
@use './icons' as icons-mx;
@use './../functions/contrast' as contrast-fn;

@use './../variables/spacing';
@use './../variables/components/close';
@use './../variables/components/notification';

@mixin notification-size($size) {
  $icon-size: map.get(notification.$notification-icon-size-map, $size);
  $font-size: map.get(notification.$notification-font-size-map, $size);
  $padding-x: map.get(notification.$notification-padding-x-map, $size);
  $padding-y: map.get(notification.$notification-padding-y-map, $size);
  $hr-margin-block: map.get(notification.$notification-hr-margin-block-map, $size);

  min-height: 2 * $padding-y + $icon-size;
  box-shadow: notification.$notification-box-shadow;
  border-radius: notification.$notification-border-radius;
  padding: $padding-y $padding-x;
  padding-inline-start: $padding-x + $icon-size + notification.$notification-gap;
  margin-block-end: notification.$notification-margin-bottom;
  background-size: $icon-size;
  background-position: $padding-x $padding-y;
  background-repeat: no-repeat;
  font-size: $font-size;
  font-weight: notification.$notification-font-weight;

  &.no-icon {
    min-height: 2 * $padding-y + close.$close-size;
    padding-inline-start: $padding-x;
    background-image: none;
  }

  a {
    font-weight: notification.$notification-link-font-weight;
  }

  hr {
    margin-block: $hr-margin-block !important;
  }

  > *:only-child {
    @include notification-heading($size);
  }
}

@mixin notification-variant($color, $icon) {
  @include color-mx.colored-background($color);

  &:not(.no-icon, [class^='pi-'], [class*=' pi-']) {
    @include icons-mx.pi($icon, contrast-fn.get-best-contrast-text($color));
  }
}

@mixin notification-dismissible($size, $close: 'btn-close') {
  $padding-x: map.get(notification.$notification-padding-x-map, $size);

  position: relative;
  padding-inline-end: $padding-x + notification.$notification-gap + close.$close-size;

  > .#{$close} {
    position: absolute;
    inset-block-start: spacing.$spacer;
    inset-inline-end: $padding-x;
  }

  > .#{$close}:first-child + *:last-child {
    @include notification-heading($size);
  }
}

@mixin notification-heading($size) {
  font-size: map.get(notification.$notification-heading-font-size-map, $size);
  font-weight: notification.$notification-heading-font-weight;
}
